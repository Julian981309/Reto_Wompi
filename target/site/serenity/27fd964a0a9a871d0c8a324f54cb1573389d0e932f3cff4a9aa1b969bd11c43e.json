{"name":"Falla por firma de integridad invalida","id":"pagos-con-nequi;falla-por-firma-de-integridad-invalida","scenarioId":"wompi_nequi:Falla por firma de integridad invalida","methodName":"Falla por firma de integridad invalida","testSteps":[{"number":1,"description":"Given Configuro el host y llaves","duration":32,"startTime":"2025-08-18T21:42:34.689808900-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0},{"number":2,"description":"And Obtengo un acceptance token valido","duration":516,"startTime":"2025-08-18T21:42:34.725731800-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":3,"description":"Qa get acceptance token","duration":479,"startTime":"2025-08-18T21:42:34.756135400-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":4,"description":"GET https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","duration":0,"startTime":"2025-08-18T21:42:35.221553200-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"GET","path":"https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","content":"","contentType":"null","requestHeaders":"Accept\u003d*/*","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nTransfer-Encoding: chunked\r\nConnection: keep-alive\r\nDate: Tue, 19 Aug 2025 02:42:35 GMT\r\napigw-requestid: PiCoUjHwoAMEZlA\u003d\r\nvary: Origin\r\nvary: accept-encoding\r\ncontent-encoding: gzip\r\nX-Cache: Miss from cloudfront\r\nVia: 1.1 2e9033da1cf7b64ac622ab535b39a266.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: MIA3-C3\r\nX-Amz-Cf-Id: HUrDxPOSzaZPixm_aVD9-tMFJRuKtPJ6NE58wyCBTcakypKRM3x4xQ\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"data\": {\n        \"id\": 5113,\n        \"name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"email\": \"pruebasensandbox@yopmail.com\",\n        \"contact_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"phone_number\": \"+573000000000\",\n        \"active\": true,\n        \"logo_url\": null,\n        \"legal_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"legal_id_type\": \"CC\",\n        \"legal_id\": \"1069879849\",\n        \"public_key\": \"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\n        \"accepted_currencies\": [\n            \"COP\"\n        ],\n        \"fraud_javascript_key\": null,\n        \"fraud_groups\": [\n            \n        ],\n        \"accepted_payment_methods\": [\n            \"NEQUI\",\n            \"PSE\",\n            \"BANCOLOMBIA_TRANSFER\",\n            \"CARD\",\n            \"BANCOLOMBIA_COLLECT\",\n            \"BANCOLOMBIA_QR\",\n            \"DAVIPLATA\",\n            \"BANCOLOMBIA_BNPL\",\n            \"SU_PLUS\"\n        ],\n        \"payment_methods\": [\n            {\n                \"name\": \"BANCOLOMBIA_BNPL\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_BNPL_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_COLLECT\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_COLLECT_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_QR\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_QR_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_TRANSFER\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_TRANSFER_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"CARD\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"CARD_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"DAVIPLATA\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"DAVIPLATA_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"NEQUI\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"NEQUI_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"PSE\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"PSE_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"SU_PLUS\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"SU_PLUS_SANDBOX\"\n                    }\n                ]\n            }\n        ],\n        \"presigned_acceptance\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3NTU1NzEzNTUtNzA5NjIiLCJlbWFpbCI6IiIsImV4cCI6MTc1NTU3NDk1NX0.UxFHY3gAduI2crS10CD_5mAnKGhkyLRGgQO7wp2hIWw\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/reglamento-Usuarios-Colombia.pdf\",\n            \"type\": \"END_USER_POLICY\"\n        },\n        \"presigned_personal_data_auth\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6NDc0LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLXRyYXRhbWllbnRvLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiNTE2ODYzZjA3NzZlZWY3NjBkNGI5OWFiMWJlZjRjNzgiLCJqaXQiOiIxNzU1NTcxMzU1LTM5Mzg3IiwiZW1haWwiOiIifQ.lYtl6URNCRUIaVUZc90rZkoSL8lApNiqnIFZoF-8umY\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/autorizacion-tratamiento-datos-personales.pdf\",\n            \"type\": \"PERSONAL_DATA_AUTH\"\n        },\n        \"click_to_pay_dpa_id\": null,\n        \"mcc\": null,\n        \"acquirer_id\": null\n    },\n    \"meta\": {\n        \n    }\n}","statusCode":200},"precondition":false,"level":2}]}]},{"number":5,"description":"When intento crear una transacci√≥n NEQUI con una firma invalida","duration":1479,"startTime":"2025-08-18T21:42:35.266605400-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":6,"description":"Qa get acceptance token","duration":498,"startTime":"2025-08-18T21:42:35.288987900-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":7,"description":"GET https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","duration":0,"startTime":"2025-08-18T21:42:35.774687800-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"GET","path":"https://api-sandbox.co.uat.wompi.dev/v1/merchants/pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7","content":"","contentType":"null","requestHeaders":"Accept\u003d*/*","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nTransfer-Encoding: chunked\r\nConnection: keep-alive\r\nDate: Tue, 19 Aug 2025 02:42:36 GMT\r\napigw-requestid: PiCoahc8IAMEJxA\u003d\r\nvary: Origin\r\nvary: accept-encoding\r\ncontent-encoding: gzip\r\nX-Cache: Miss from cloudfront\r\nVia: 1.1 dce51d45ef5ad8611b405be0de5fb2da.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: MIA3-C3\r\nX-Amz-Cf-Id: hb87YtiDJxRdBQBlyI2RvkcY9pkd6F-4M8woQEY2XNwKPRQdzQOyKw\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"data\": {\n        \"id\": 5113,\n        \"name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"email\": \"pruebasensandbox@yopmail.com\",\n        \"contact_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"phone_number\": \"+573000000000\",\n        \"active\": true,\n        \"logo_url\": null,\n        \"legal_name\": \"Alejandra Pruebas Sandbox UAT\",\n        \"legal_id_type\": \"CC\",\n        \"legal_id\": \"1069879849\",\n        \"public_key\": \"pub_stagtest_g2u0HQd3ZMh05hsSgTS2lUV8t3s4mOt7\",\n        \"accepted_currencies\": [\n            \"COP\"\n        ],\n        \"fraud_javascript_key\": null,\n        \"fraud_groups\": [\n            \n        ],\n        \"accepted_payment_methods\": [\n            \"NEQUI\",\n            \"PSE\",\n            \"BANCOLOMBIA_TRANSFER\",\n            \"CARD\",\n            \"BANCOLOMBIA_COLLECT\",\n            \"BANCOLOMBIA_QR\",\n            \"DAVIPLATA\",\n            \"BANCOLOMBIA_BNPL\",\n            \"SU_PLUS\"\n        ],\n        \"payment_methods\": [\n            {\n                \"name\": \"BANCOLOMBIA_BNPL\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_BNPL_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_COLLECT\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_COLLECT_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_QR\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_QR_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"BANCOLOMBIA_TRANSFER\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"BANCOLOMBIA_TRANSFER_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"CARD\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"CARD_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"DAVIPLATA\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"DAVIPLATA_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"NEQUI\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"NEQUI_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"PSE\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"PSE_SANDBOX\"\n                    }\n                ]\n            },\n            {\n                \"name\": \"SU_PLUS\",\n                \"payment_processors\": [\n                    {\n                        \"name\": \"SU_PLUS_SANDBOX\"\n                    }\n                ]\n            }\n        ],\n        \"presigned_acceptance\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6MjQzLCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvcmVnbGFtZW50by1Vc3Vhcmlvcy1Db2xvbWJpYS5wZGYiLCJmaWxlX2hhc2giOiJkMWVkMDI3NjhlNDEzZWEyMzFmNzAwMjc0N2Y0N2FhOSIsImppdCI6IjE3NTU1NzEzNTUtNjAxMjAiLCJlbWFpbCI6IiIsImV4cCI6MTc1NTU3NDk1NX0.IIhpnA7R525qjzxPFKVeMFEozM1uVgdI0Uh23qVbDuA\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/reglamento-Usuarios-Colombia.pdf\",\n            \"type\": \"END_USER_POLICY\"\n        },\n        \"presigned_personal_data_auth\": {\n            \"acceptance_token\": \"eyJhbGciOiJIUzI1NiJ9.eyJjb250cmFjdF9pZCI6NDc0LCJwZXJtYWxpbmsiOiJodHRwczovL3dvbXBpLmNvbS9hc3NldHMvZG93bmxvYWRibGUvYXV0b3JpemFjaW9uLXRyYXRhbWllbnRvLWRhdG9zLXBlcnNvbmFsZXMucGRmIiwiZmlsZV9oYXNoIjoiNTE2ODYzZjA3NzZlZWY3NjBkNGI5OWFiMWJlZjRjNzgiLCJqaXQiOiIxNzU1NTcxMzU1LTEwODUxIiwiZW1haWwiOiIifQ.AtsV5SOcW9Gq6Sg3hw7jp3PN090kTrEW4yg_YRnzw-M\",\n            \"permalink\": \"https://wompi.com/assets/downloadble/autorizacion-tratamiento-datos-personales.pdf\",\n            \"type\": \"PERSONAL_DATA_AUTH\"\n        },\n        \"click_to_pay_dpa_id\": null,\n        \"mcc\": null,\n        \"acquirer_id\": null\n    },\n    \"meta\": {\n        \n    }\n}","statusCode":200},"precondition":false,"level":2}]},{"number":8,"description":"Qa create nequi transaction invalid signature","duration":868,"startTime":"2025-08-18T21:42:35.870850800-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1,"children":[{"number":9,"description":"POST https://api-sandbox.co.uat.wompi.dev/v1/transactions","duration":0,"startTime":"2025-08-18T21:42:36.739641400-05:00[America/Bogota]","result":"SUCCESS","restQuery":{"method":"POST","path":"https://api-sandbox.co.uat.wompi.dev/v1/transactions","content":"{\n    \"currency\": \"COP\",\n    \"reference\": \"TXN-1755571355269\",\n    \"signature\": \"deadbeef\",\n    \"amount_in_cents\": 300000,\n    \"customer_email\": \"qa@example.com\",\n    \"acceptance_token\": null,\n    \"payment_method\": {\n        \"phone_number\": \"3991111111\",\n        \"type\": \"NEQUI\"\n    }\n}","contentType":"application/json","requestHeaders":"Authorization\u003dBearer prv_stagtest_5i0ZGIGiFcDQifYsXxvsny7Y37tKqFWg\r\n\t\t\t\tIdempotency-Key\u003dTXN-1755571355269\r\n\t\t\t\tAccept\u003d*/*\r\n\t\t\t\tContent-Type\u003dapplication/json","requestCookies":"","responseHeaders":"Content-Type: application/json\r\nContent-Length: 134\r\nConnection: keep-alive\r\nDate: Tue, 19 Aug 2025 02:42:36 GMT\r\nvary: Origin\r\napigw-requestid: PiCofhE8IAMEZzQ\u003d\r\nX-Cache: Error from cloudfront\r\nVia: 1.1 2e9033da1cf7b64ac622ab535b39a266.cloudfront.net (CloudFront)\r\nX-Amz-Cf-Pop: MIA3-C3\r\nX-Amz-Cf-Id: _HCUp_RPb0y0vSXVzuk2yNw28Iqebjpk2jPmdJuhFa_1HSVVKyzrcA\u003d\u003d\r\nX-XSS-Protection: 1; mode\u003dblock\r\nX-Frame-Options: SAMEORIGIN\r\nReferrer-Policy: strict-origin-when-cross-origin\r\nX-Content-Type-Options: nosniff\r\nStrict-Transport-Security: max-age\u003d31536000\r","responseCookies":"\r","responseBody":"{\n    \"error\": {\n        \"type\": \"INPUT_VALIDATION_ERROR\",\n        \"messages\": {\n            \"acceptance_token\": [\n                \"El token de aceptaci√≥n est√° en un formato incorrecto\"\n            ]\n        }\n    }\n}","statusCode":422},"precondition":false,"level":2}]}]},{"number":10,"description":"Then la API responde con c√≥digo 422 o 400 indicando error de firma","duration":15,"startTime":"2025-08-18T21:42:36.747619800-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":0,"children":[{"number":11,"description":"Then HTTP status code should be (is (422) or is (400))","duration":2,"startTime":"2025-08-18T21:42:36.754189900-05:00[America/Bogota]","result":"SUCCESS","precondition":false,"level":1}]}],"userStory":{"id":"wompi_nequi","storyName":"Pagos con nequi","displayName":"Pagos con nequi","path":"wompi_nequi","pathElements":[{"name":"wompi_nequi","description":""}],"type":"feature"},"title":"Falla por firma de integridad invalida","description":"","backgroundTitle":"","backgroundDescription":"","tags":[{"name":"alterna1","type":"tag","displayName":"alterna1"},{"name":"Windows","type":"context","displayName":"Windows"}],"startTime":"2025-08-18T21:42:34.669387600-05:00[America/Bogota]","duration":2095,"projectKey":"","isManualTestingUpToDate":false,"context":"windows","manual":false,"testSource":"Cucumber","actors":[{"name":"QA"}],"order":0,"result":"SUCCESS"}